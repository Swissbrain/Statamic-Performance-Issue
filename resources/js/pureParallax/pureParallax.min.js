function pureParallax(t){let e={selector:"[data-depth]",axisSelector:"parallax-x",bgSelector:"parallax-bg",bgTopSelector:"parallax-bg-top",topSelector:"parallax-top",btmSelector:"parallax-btm",container:"section",offsetHeader:!0,headerId:"hd",minWidth:64,oldBrowserSupport:"false"};for(let o in t)e[o]=t[o];let n,r;function i(){c(n=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)/parseFloat(getComputedStyle(document.querySelector("html")).fontSize))}function l(t){let e=getComputedStyle(t),o=new Image,n=e.backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2"),r=e.backgroundSize,i=parseInt(e.width.replace("px",""),10),l=parseInt(e.height.replace("px",""),10),a=[i,l],s=[],c;if(o.src=n,c=o.width>o.height?o.width/o.height:o.height/o.width,r=r.split(" "),s[0]=r[0],s[1]=r.length>1?r[1]:"auto","cover"===r[0])a[0]>a[1]&&a[0]/a[1]>=c?(s[0]=a[0],s[1]="auto"):(s[0]="auto",s[1]=a[1]);else if("contain"===r[0])a[0]<a[1]?(s[0]=a[0],s[1]="auto"):a[0]/a[1]>=c?(s[0]="auto",s[1]=a[1]):(s[1]="auto",s[0]=a[0]);else for(let d=r.length;d--;)r[d].indexOf("px")>-1?s[d]=r[d].replace("px",""):r[d].indexOf("%")>-1&&(s[d]=a[d]*(r[d].replace("%","")/100));return"auto"===s[0]&&"auto"===s[1]?(s[0]=o.width,s[1]=o.height):(c="auto"===s[0]?o.height/s[1]:o.width/s[0],s[0]="auto"===s[0]?o.width/c:s[0],s[1]="auto"===s[1]?o.height/c:s[1]),{width:Math.round(s[0]),height:Math.round(s[1])}}function a(t){return t.getBoundingClientRect().top}function s(t){return function t(e){let o=e.getBoundingClientRect();return o.bottom+0>0&&o.right>0&&o.left<(window.innerWidth||document.documentElement.clientWidth)&&o.top-0<(window.innerHeight||document.documentElement.clientHeight)}(t)&&n>=e.minWidth}function c(){let t=document.querySelectorAll(e.selector),o=window.innerHeight||document.documentElement.clientHeight,n=0,i,c,d,u,h,g,f,$;for(let p of t){$=p.hasAttribute("data-container")?"."+p.getAttribute("data-container"):"."+e.container,g=p.closest($)?p.closest($):p.parentElement,f=p.hasAttribute("data-start-position")?p.getAttribute("data-start-position"):.5;let b=getComputedStyle(p),m=p.offsetHeight;if(m-=parseFloat(b.borderTop)+parseFloat(b.borderBottom),h=window.pageYOffset,i=p.getAttribute("data-depth"),s(g)){if(p.classList.contains(e.bgSelector)||p.classList.contains(e.bgTopSelector)&&s(p)){let _=l(p),x=(_.width/_.height).toFixed(3);if(p.classList.contains(e.bgTopSelector))d="50% "+Math.round(n=h*i)+"px",p.style.backgroundPosition=d;else{d="50% "+Math.round(n=-(a(p)*i-r*i))+"px",p.style.backgroundPosition=d;(u=Math.round(m+(o*i-m*i)))*x<g.offsetWidth?p.style.backgroundSize="cover":p.style.backgroundSize="auto "+u+"px"}}else{if(p.classList.contains(e.btmSelector))n=-(document.body.scrollHeight-window.innerHeight-window.scrollY)*i;else if(p.classList.contains(e.topSelector))n=h*i;else{let S;n=(-(a(g)-r)+(o-r-g.offsetHeight)*f)*i}c=p.classList.contains(e.axisSelector)?"translate3d("+Math.round(n)+"px, 0, 0)":"translate3d(0, "+Math.round(n)+"px, 0)","true"==e.oldBrowserSupport?(p.style["-webkit-transform"]=c,p.style["-moz-transform"]=c,p.style["-ms-transform"]=c,p.style["-o-transform"]=c,p.style.transform=c):(p.style["-webkit-transform"]=c,p.style.transform=c)}}else p.classList.contains(e.bgSelector)||p.classList.contains(e.bgTopSelector)&&s(p)?(p.style.backgroundPosition="50% 50%",p.style.backgroundSize="cover"):p.style.transform="translate3d(0,0,0)"}}window.addEventListener("load",function t(){c(),i(),window.addEventListener("resize",i),window.addEventListener("scroll",c)}),r=!1!=e.offsetHeader&&null!=document.getElementById(e.headerId)?document.getElementById(e.headerId).offsetHeight:0}export default pureParallax;